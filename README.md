# ETS2-AUTO-DRIVE
闲着也是闲着，不如做点有意思的事。  
上一个项目是GTA5自动驾驶基于Python，这次准备写一个基于C++的项目  
由于我本人是一个爱玩欧卡的老司机，每天都要开上一两把，但是时间一长，渐渐的也有些乏味  
所以，准备写个项目，让卡车自己跑吧  
这个项目会用v1.0、v2.0这样的命名方式来加入新的功能，以便于小伙伴们一起讨论和学习  
（由于我也只是一个新手小白，如果小伙伴们有更好的想法，欢迎大家一起加入）  
  
****
  
v1.0  
  
捕捉窗口画面  
要用到哪些东西：HDC、DC、BitMap、OpenCV、Mat  
HDC：窗体、控件的句柄（长整形），windows系统API中定义的一个数据类型，可以理解为放画布的画板  
DC：可以理解为画布  
BitMap：基于位的映射  
OpenCV：不用我多说了吧  
Mat：多维密集数组，可以用来处理矩阵、图像等等常见的多维数组  
###思路###  
先建两个窗体，将一个窗体中的内容复制到另一个中，然后对后者进行数据转换BitmapToMat，再由OpenCV显示出来  
###例图###  
  
![Image text](https://github.com/Sanduoo/ETS2-AUTO-DRIVE/blob/master/v1.0/2020-03-14v1.0.jpg)
****
  
v2.0

对画面进行处理  
增加了控制模块  
  
原本我们的画面是一个400*250的大小，其中车道画面只占了整个画面的一半  
所以我打算对整个画面进行ROI处理，仅保留那些我们需要用到的部分  
模拟键盘输入模块，我这里用的是Windows提供的一个模拟键盘API函数keybd_event()（Python可以用pyautogui
）来实现  
keybd_event(key,0,0,0);	//对应按下key  
keybd_event(key,0,KEYEVENTF_KEYUP,0);	//抬起key  
key对应着你要按下的键的ASCII码  
在我们操作键盘时，其实有两个动作，按下和弹起，当你要从键盘输入一个字符时，就是由这两个动作完成的  
###思路###  
简单的处理一下图像，为之后的车道识别做准备  
模拟键盘输入是为了之后控制车辆前进后退左转右转做准备  
###例图###  
![Image text](https://github.com/Sanduoo/ETS2-AUTO-DRIVE/blob/master/v2.0/2020-03-14v2.0.jpg)
  
****
  
v3.0  
  
增加了霍夫曼直线检测  
    
打算在直线检测上加入一计算角度的筛选条件，因为每次检测出来的直线中常常包含一些我们不需要的直线  
直线检测这一步就是为了计算车道的角度，这样我们就可以利用这个角度让程序来判断是左转还是右转了  
  
###思路###  
边缘检测Canny+霍夫曼直线检测HoughLinesP（高斯滤波GaussianBlur的话看情况）  
###例图###  
暂无  
  
****